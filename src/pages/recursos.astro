---
import Layout from '../layouts/Layout.astro';
---

<Layout>
<style>
/* styles.css */

/* styles.css */

body {

    font-family: 'Arial', sans-serif;
    background-color: #1a1c2c;
    color: #e9e9e9;
   }

.dashboard {
    padding-top: 20vh;
    width: 100%;
    height: auto;
    display: flex;
    max-height: 100vh;
    box-shadow: 0 0 20px rgba(0, 255, 255, 0.2);
    border-radius: 10px;
    overflow: hidden;
    flex-direction: column; /* Ajuste por defecto para dispositivos pequeños */
}

.sidebar {
    width: 100%; /* Ocupa todo el ancho en dispositivos pequeños */
    background-color: #232946;
    padding: 20px;
    box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1); /* Cambiar sombra en la parte inferior */
}

.sidebar h2 {
    color: #00ffff;
    text-shadow: 0 0 5px rgba(0, 255, 255, 0.5);
    margin-bottom: 20px;
}

.sidebar nav ul {
    list-style: none;
    padding: 0;
}

.sidebar nav ul li {
    margin: 15px 0;
}

.sidebar nav ul li a {
    color: #e9e9e9;
    text-decoration: none;
    display: block;
    padding: 10px;
    border-radius: 5px;
    transition: background 0.3s;
}

.sidebar nav ul li a:hover,
.sidebar nav ul li.active a {
    background-color: #3a0ca3;
}

.main-content {
    flex-grow: 1;
    padding: 20px;
    background-color: #2b2d42;
}

.main-content header h1 {
    font-size: 2rem;
    color: #00ffff;
    text-shadow: 0 0 5px rgba(0, 255, 255, 0.5);
}

.dashboard-section {
    display: none;
    animation: fadeIn 0.5s ease;
}

.dashboard-section.active {
    display: block;
}

@keyframes fadeIn {
    from {
        opacity: 0;
        transform: translateY(20px);
    }
    to {
        opacity: 1;
        transform: translateY(0);
    }
}

/* Responsividad */
@media (min-width: 768px) {
    .dashboard {
        flex-direction: row; /* Cambiar a diseño de fila en pantallas medianas y grandes */
    }

    .sidebar {
        width: 250px;
        height: auto;
        box-shadow: 4px 0 15px rgba(0, 0, 0, 0.1);
    }

    .main-content {
        padding: 40px;
    }
}

@media (max-width: 767px) {
    .sidebar nav ul li a {
        padding: 8px;
        font-size: 0.9rem;
    }

    .main-content header h1 {
        font-size: 1.5rem;
    }
}

@media (max-width: 480px) {
    .sidebar nav ul li a {
        padding: 6px;
        font-size: 0.8rem;
    }

    .main-content header h1 {
        font-size: 1.3rem;
    }

    .main-content {
        padding: 20px 10px;
    }
}

.chart-container {
    width: 90%;
    max-width: 80%; /* Ajusta el tamaño máximo */
    margin: 0 auto; /* Centrar el gráfico */
    padding: 20px;
    background-color: #2b2d42;
    border-radius: 8px;
    box-shadow: 0 0 20px rgba(0, 255, 255, 0.2);
}

/* Estilos para la sección de resumen */
.summary-cards {
    display: flex;
    gap: 20px;
    flex-wrap: wrap; /* Permite que las tarjetas se ajusten en pantallas pequeñas */
    margin-top: 20px;
}

.summary-card {
    flex: 1;
    min-width: 200px;
    padding: 20px;
    background-color: #2b2d42;
    border-radius: 8px;
    box-shadow: 0 0 15px rgba(0, 255, 255, 0.2);
    text-align: center;
    transition: transform 0.3s ease;
}

.summary-card:hover {
    transform: translateY(-10px);
}

.summary-card h3 {
    color: #00ffff;
    margin-bottom: 10px;
    font-size: 1.2rem;
}

.summary-value {
    font-size: 2rem;
    color: #ff79c6;
}


/* Estilos para la lista de plugins */
.plugins-list {
    display: flex;
    flex-direction: column;
    gap: 15px;
    margin-top: 20px;
}

.plugin-card {
    background-color: #2b2d42;
    border-radius: 8px;
    padding: 20px;
    box-shadow: 0 0 15px rgba(0, 255, 255, 0.2);
    transition: transform 0.3s ease;
}

.plugin-card:hover {
    transform: translateY(-10px);
}

.plugin-card h3 {
    margin-bottom: 10px;
    font-size: 1.2rem;
    color: #00ffff;
}

.plugin-card p {
    color: #e9e9e9;
}


.main-container{
height: 100vh;


}
</style>


<body>
    <div class="main-container">
    <div class="dashboard">
        <!-- Menú Lateral -->
        <aside class="sidebar">
            <h2>Recursos</h2>
            <nav>
                <ul>
                    <li class="active"><a href="#" data-section="overview">Resumen</a></li>
                    <li><a href="#" data-section="statistics">Estadísticas</a></li>
                    <li><a href="#" data-section="list">Lista de Recursos</a></li>
                </ul>
            </nav>
        </aside>

        <!-- Contenido Principal -->
        <main class="main-content">
            <!-- Cabecera -->
            <header>
                <h1>Dashboard de Recursos</h1>
                <p>Explora y administra tus recursos de manera eficiente con Astro.js y WordPress.</p>
            </header>

            <!-- Secciones -->
            <section id="overview" class="dashboard-section active">
    <h2>Resumen</h2>
    <p>Bienvenido al dashboard de recursos. Aquí puedes ver un resumen rápido de tus recursos.</p>

    <!-- Contenedor de Tarjetas de Resumen -->
    <div class="summary-cards">
        <div class="summary-card" id="total-posts">
            <h3>Total de Publicaciones</h3>
            <p class="summary-value">0</p>
        </div>
        <div class="summary-card" id="total-categories">
            <h3>Total de Categorías</h3>
            <p class="summary-value">0</p>
        </div>
        <!-- Añade más tarjetas si lo necesitas -->
    </div>
</section>


            <section id="statistics" class="dashboard-section">
    <h2>Estadísticas</h2>
    <p>Visualiza las estadísticas de tus recursos.</p>
    <canvas id="category-chart"></canvas>

    
    <!-- Gráfico de Categorías -->
    <div class="chart-container">
        <canvas id="category-chart"></canvas>
    </div>
</section>
        <main>
<section id="list" class="dashboard-section">
    <h2>Lista de Recursos</h2>
    <p>Revisa y gestiona todos tus recursos de WordPress.</p>

    <!-- Contenedor de las tarjetas de recursos -->
    <div class="resources-grid" id="resources-grid">
        <!-- Las tarjetas se agregarán aquí dinámicamente -->
    </div>
</section>

        </main>
    </div>
    </div>
 </div>
</body>

    </body>
</body>

<!-- Incluir Chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

    <script>

// script.js

document.addEventListener('DOMContentLoaded', () => {
    const navLinks = document.querySelectorAll('.sidebar nav ul li a');
    const sections = document.querySelectorAll('.dashboard-section');

    navLinks.forEach(link => {
        link.addEventListener('click', (e) => {
            e.preventDefault();
            // Remover la clase 'active' de todos los enlaces y secciones
            navLinks.forEach(nav => nav.parentElement.classList.remove('active'));
            sections.forEach(section => section.classList.remove('active'));

            // Agregar la clase 'active' al enlace y sección seleccionada
            link.parentElement.classList.add('active');
            const sectionId = link.getAttribute('data-section');
            document.getElementById(sectionId).classList.add('active');
        });
    });
});

// overview.js

document.addEventListener('DOMContentLoaded', async () => {
    // Función para obtener el número total de publicaciones
    async function fetchTotalPosts() {
        const response = await fetch('https://www.elsaltoweb.es/wp-json/wp/v2/posts');
        const posts = await response.json();
        return posts.length;
    }

    // Función para obtener el número total de categorías
    async function fetchTotalCategories() {
        const response = await fetch('https://www.elsaltoweb.es/wp-json/wp/v2/categories');
        const categories = await response.json();
        return categories.length;
    }

    // Obtener datos y actualizar las tarjetas
    const totalPosts = await fetchTotalPosts();
    const totalCategories = await fetchTotalCategories();

    // Actualizar las tarjetas en el DOM
    document.getElementById('total-posts').querySelector('.summary-value').textContent = totalPosts;
    document.getElementById('total-categories').querySelector('.summary-value').textContent = totalCategories;
});




// list.js

document.addEventListener('DOMContentLoaded', async () => {
    // Función para obtener la lista de plugins instalados desde el endpoint personalizado
    async function fetchPlugins() {
        const response = await fetch('https://www.elsaltoweb.es/wp-json/custom/v1/plugins');
        const plugins = await response.json();
        return plugins;
    }

    // Obtener los plugins y crear las tarjetas
    const plugins = await fetchPlugins();
    const pluginsList = document.getElementById('plugins-list');

    plugins.forEach(plugin => {
        // Crear la tarjeta de plugin
        const pluginCard = document.createElement('div');
        pluginCard.classList.add('plugin-card');

        pluginCard.innerHTML = `
            <h3>${plugin.name} (v${plugin.version})</h3>
            <p>${plugin.description}</p>
        `;

        // Añadir la tarjeta al contenedor
        pluginsList.appendChild(pluginCard);
    });
});


</script>

</body>
</html>

</Layout>